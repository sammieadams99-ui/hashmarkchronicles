<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hashmark Chronicles — Kentucky Athletics Blog</title>
  <meta name="description" content="Independent Kentucky football analysis with film-room breakdowns, data-driven previews, and postgame reviews. Hoops coverage coming soon." />
  <link rel="canonical" href="https://hashmarkchronicles.online/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Hashmark Chronicles — Kentucky Athletics Blog" />
  <meta property="og:description" content="Independent Kentucky football analysis with film-room breakdowns, data-driven previews, and postgame reviews." />
  <meta property="og:image" content="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" />
  <meta property="og:url" content="https://hashmarkchronicles.online/" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@HashmarkCFB" />
  <meta name="twitter:title" content="Hashmark Chronicles — Kentucky Athletics Blog" />
  <meta name="twitter:description" content="Independent Kentucky football analysis with film-room breakdowns, data-driven previews, and postgame reviews." />
  <meta name="twitter:image" content="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" />

  <!-- Retro font (ticker only) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Chart.js (kept for your articles) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --ky-blue:#0033a0; --ink:#0b0d12; --paper:#ffffff; --muted:#eef1f6; --hc-green:#39ff14;
      --accent:#1b75ff; --shadow:0 6px 24px rgba(0,0,0,.12); --radius:18px;
      --good:#16a34a; --bad:#dc2626; --warn:#d97706;
      --grade-a:#16a34a; --grade-b:#2563eb; --grade-c:#d97706; --grade-d:#f97316; --grade-f:#dc2626;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:Georgia,Times,"Times New Roman",serif;color:var(--ink);background:#f7f8fb;line-height:1.6}
    a{color:var(--ky-blue);text-decoration:none} a:hover{color:var(--accent)}

    /* Top bar */
    .bar{background:var(--ink);color:var(--paper);font:500 14px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:8px 16px;display:flex;align-items:center;justify-content:center;gap:10px}
    .bar .dot{width:8px;height:8px;border-radius:50%;background:var(--hc-green);display:inline-block}

    /* Header */
    header{position:sticky;top:0;z-index:50;backdrop-filter:blur(8px);background:rgba(255,255,255,.85);border-bottom:2px solid var(--muted)}
    .wrap{max-width:1100px;margin:auto;padding:16px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:16px}

    .brand{display:flex;align-items:center;gap:14px}
    .hc-logo{width:56px;height:56px;border-radius:12px;position:relative;overflow:hidden;background:var(--ky-blue);box-shadow:var(--shadow);display:grid;place-items:center}
    .hc-logo span{font:italic 800 28px/1 system-ui,-apple-system,Segoe UI,Arial,sans-serif;color:#fff;letter-spacing:.5px;transform:translateY(3px)}
    .hc-logo::before{content:"";position:absolute;top:8px;left:8px;right:8px;height:5px;border-radius:5px;background:linear-gradient(90deg,transparent 0%,var(--hc-green) 35%,var(--hc-green) 65%,transparent 100%);filter:drop-shadow(0 0 6px rgba(57,255,20,.6));animation:swipe 2.8s ease-in-out infinite;opacity:.95}
    @keyframes swipe{0%{transform:translateX(-120%)}40%{transform:translateX(0)}60%{transform:translateX(0)}100%{transform:translateX(120%)}}
    .brand-title{display:flex;flex-direction:column}
    .brand-title strong{font:800 20px/1.2 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:var(--ink)}
    .brand-title small{font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#4a5568;letter-spacing:.5px}

    nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    nav a{font:600 14px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

    .chip-x{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--ky-blue);background:#fff;color:var(--ky-blue);font:700 12px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;transition:background .15s,color .15s,border-color .15s}
    .chip-x:hover{background:var(--ky-blue);color:#fff;border-color:var(--ky-blue)}
    .chip-x .x-glyph{font-weight:900;font-size:14px;line-height:1;display:inline-block;transform:translateY(-1px)}

    /* Ticker */
    .ticker{width:100%;background:#fff;color:#0b0d12;border-top:3px solid var(--ky-blue);border-bottom:1px solid var(--muted);overflow:hidden}
    .ticker__track{display:flex;gap:40px;list-style:none;margin:0;padding:6px 0 6px 100%;font-family:'Press Start 2P',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;font-size:11px;line-height:1.1;white-space:nowrap;animation:hc-marquee 28s linear infinite}
    @keyframes hc-marquee{to{transform:translateX(-100%)}}
    .ticker:hover .ticker__track{animation-play-state:paused}
    @media (prefers-reduced-motion:reduce){.ticker__track{animation:none;padding-left:16px}}
    .ticker__track.trend li{display:inline-flex;align-items:baseline;gap:6px}
    .trend-dot{width:7px;height:7px;border-radius:50%}
    .label{color:#0b0d12}
    .trend-value.good{color:#16a34a}.trend-value.bad{color:#dc2626}.trend-value.warn{color:#d97706}
    .trend-dot.good{background:#16a34a}.trend-dot.bad{background:#dc2626}.trend-dot.warn{background:#d97706}

    /* Hero */
    .hero{max-width:1100px;margin:24px auto;display:grid;grid-template-columns:1.2fr .8fr;gap:24px}
    .card{background:var(--paper);border:1px solid var(--muted);border-radius:var(--radius);box-shadow:var(--shadow)}
    .card .pad{padding:20px}
    .hero .feature img{display:block;width:100%;height:auto;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}
    .kicker{font:700 12px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;text-transform:uppercase;letter-spacing:.12em;color:var(--ky-blue)}
    h1,h2,h3{font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#0b0d12}
    h1{font-size:32px;margin:8px 0 14px} h2{font-size:22px;margin:0 0 10px} p{margin:0 0 12px}

    .block{padding:16px;border-top:3px solid var(--ky-blue)}
    .stat-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .stat{background:#f3f6fb;border:1px solid var(--muted);border-radius:12px;padding:10px}
    .stat b{display:block;font:800 18px/1.1 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif}
    .stat span{font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#475569}

    /* Main */
    main{max-width:1100px;margin:0 auto 48px;display:grid;grid-template-columns:1fr .38fr;gap:24px}
    article{background:var(--paper);border:1px solid var(--muted);border-radius:var(--radius);box-shadow:var(--shadow)}
    .prose{padding:24px}.prose h2{margin-top:22px}
    .callout{border-left:4px solid var(--hc-green);background:#f4fff2;padding:12px 14px;border-radius:12px;margin:14px 0}

    .article-body h1{font-size:2.2em;border-bottom:2px solid #003087;padding-bottom:.3em;margin-top:.5rem}
    .header-image,.atmosphere-image,.special-teams-image{width:100%;height:auto;margin:1em 0;border-radius:6px;display:block}
    .video-container{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;margin:1em 0;background:#000 url('https://via.placeholder.com/800x450?text=Video+Loading') center/cover}
    .video-container iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}
    blockquote.twitter-tweet{margin:1em auto;border-left:4px solid #003087;padding-left:1em}
    .tweet-embed figcaption{color:#444;font-size:.9em;text-align:center;margin-top:.4rem}
    table{width:100%;border-collapse:collapse;margin:1em 0;font-size:.9em}
    th,td{border:1px solid #ddd;padding:.75em;text-align:left}
    th{background:#003087;color:#fff;font-weight:700}
    tr:nth-child(even){background:#f9f9f9}
    .pull-quote{font-size:1.1em;font-style:italic;color:#333;border-left:4px solid #bf5700;padding:.5em 1em;margin:1.5em 0}
    .section-divider{height:2px;background:linear-gradient(to right,#003087,#bf5700);margin:2rem 0}

    /* Player spotlight rows */
    .mini-spotlight .row{
      display:flex;gap:10px;align-items:center;padding:8px;border:1px solid var(--muted);
      border-radius:10px;background:#fff;margin:8px 0
    }
    .mini-spotlight .row:hover{background:#f3f6fb}
    .mini-spotlight img{width:48px;height:48px;border-radius:8px;object-fit:cover;border:1px solid var(--muted)}
    .mini-spotlight .who{font:700 14px/1.2 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#0b0d12}
    .mini-spotlight .stat{font:600 12px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#475569}
    .mini-spotlight .tiny{font:600 11px/1 system-ui;color:#64748b}
    .mini-spotlight .toggles{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 8px}
    .mini-spotlight .chip{border:1px solid var(--muted);border-radius:999px;padding:6px 10px;background:#fff;font:700 12px/1 system-ui;cursor:pointer}
    .mini-spotlight .chip.active{background:#0033a0;color:#fff;border-color:#0033a0}

    /* Grade pill (reverted style, right-aligned & loud) */
    .grade-badge{
      margin-left:auto;
      border-radius:999px;
      padding:6px 10px;
      font:800 13px/1 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;
      color:#fff;
      min-width:56px;
      text-align:center;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
      user-select:none;
    }
    .grade-a{background:var(--grade-a)}
    .grade-b{background:var(--grade-b)}
    .grade-c{background:var(--grade-c)}
    .grade-d{background:var(--grade-d)}
    .grade-f{background:var(--grade-f)}

    #pulse .feeds{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:980px){#pulse .feeds{grid-template-columns:1fr}}

    footer{background:var(--ink);color:#c7d2fe;padding:28px 0;margin-top:40px}
    footer .cols{max-width:1100px;margin:auto;display:grid;grid-template-columns:1fr 1fr;gap:18px}
    footer a{color:#c7d2fe}

    @media (max-width:980px){
      .hero,main{grid-template-columns:1fr}
      nav ul{flex-wrap:wrap}
      .article-body h1{font-size:1.8em}
    } 
    .mini-spotlight .row { display:flex; align-items:center; gap:10px; }
.mini-spotlight .row > .info { display:flex; gap:10px; align-items:center; }
.grade-chip {
  margin-left:auto; min-width:60px; padding:6px 10px; border-radius:12px;
  border:1px solid var(--muted); background:#fff; text-align:center;
  display:flex; flex-direction:column; align-items:center; gap:2px;
  box-shadow: var(--shadow);
}
.grade-chip .letter { font: 900 16px/1 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif; letter-spacing:.2px; }
.grade-chip .pct    { font: 700 11px/1 system-ui; opacity:.85; }
.grade-chip .trend  { font: 700 10px/1 system-ui; margin-top:2px; }
.grade-chip.good { color: var(--good);   border-color: rgba(22,163,74,.35); }
.grade-chip.warn { color: var(--warn);   border-color: rgba(217,119,6,.35); }
.grade-chip.bad  { color: var(--bad);    border-color: rgba(220,38,38,.35); }
.grade-chip .trend.up   { color: var(--good); }
.grade-chip .trend.flat { color: #64748b; }
.grade-chip .trend.down { color: var(--bad); }
  </style>
</head>
<body>
  <div class="bar"><span class="dot"></span> Kentucky Football • Independent film-room analysis & previews • HC Hoops returns this winter</div>

  <header>
    <div class="wrap row">
      <div class="brand">
        <div class="hc-logo" aria-label="Hashmark Chronicles logo"><span>HC</span></div>
        <div class="brand-title">
          <strong>Hashmark Chronicles</strong>
          <small>Kentucky Athletics Blog</small>
        </div>
      </div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#article">Gridiron</a></li>
          <li><a href="#hardtop">Hardtop</a></li>
          <li><a href="#pulse">The Pulse</a></li>
          <li><a href="/posts/library.html">Articles</a></li>
          <li><a href="#about">About</a></li>
          <li>
            <a class="chip-x" href="https://x.com/HashmarkCFB" target="_blank" rel="me noopener" aria-label="Follow @HashmarkCFB on X">
              <span class="x-glyph" aria-hidden="true">𝕏</span><span>@HashmarkCFB</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- TICKER -->
  <div class="ticker" aria-label="Season leaders & trending stats">
    <ul class="ticker__track trend" id="tickerTrack">
      <!-- Inline fallback; replaced by live when available -->
      <li><span class="trend-dot good"></span><span class="label"><strong>Explosive PA rate</strong> <span class="trend-value good">+6.3%</span> vs base</span></li>
      <li><span class="trend-dot good"></span><span class="label"><strong>Yds/Play (UK)</strong> <span class="trend-value good">5.7</span></span></li>
      <li><span class="trend-dot warn"></span><span class="label"><strong>Havoc Allowed</strong> <span class="trend-value warn">42%</span> steady</span></li>
      <li><span class="trend-dot bad"></span><span class="label"><strong>3rd &amp; 6+ defense</strong> <span class="trend-value bad">46%</span> conv. allowed</span></li>
      <li><span class="trend-dot good"></span><span class="label"><strong>Boley</strong> <span class="trend-value good">885 yds • 4 TD</span></span></li>
    </ul>
  </div>

  <!-- HERO -->
  <section class="hero">
    <article class="card feature" itemscope itemtype="https://schema.org/Article">
      <img src="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" alt="Texas Longhorns vs Kentucky Wildcats — ESPN event graphic" />
      <div class="pad">
        <div class="kicker">Game Preview</div>
        <h1 itemprop="headline">Kentucky vs. Texas — Oct. 18, 2025</h1>
        <p itemprop="description">Your full preview: atmosphere, QB breakdowns, trench warfare, special teams, and the upset call.</p>
        <p><a href="#article">Read the breakdown →</a></p>
      </div>
    </article>

    <aside class="card">
      <div class="block">
        <div class="kicker">Next Kickoff</div>
        <h2><span id="nextTeamName">Kentucky</span> @ <span id="nextOpponent" style="white-space:nowrap">[Opponent]</span></h2>
        <p id="nextMeta">Date • Time • TV: <b>ESPN</b></p>

        <!-- Live team tiles (wired) -->
        <div class="stat-grid" style="margin-top:10px">
          <div class="stat"><b id="ukYPP">5.7</b><span>Yards/Play (UK)</span></div>
          <div class="stat"><b id="uk3rd">—</b><span>3rd Down (UK)</span></div>
          <div class="stat"><b id="ukTOP">—</b><span>Time of Poss. (UK)</span></div>
          <div class="stat"><b id="ukTO">—</b><span>Turnovers (UK)</span></div>
        </div>
      </div>

      <div class="block">
        <div class="kicker">Hashmarks</div>
        <p style="margin:8px 0 12px">Quick-hit trends we’re tracking.</p>
        <ul>
          <li>RPO usage climbing on 2nd-and-medium.</li>
          <li>Boundary corner blitz ~12% vs heavy sets.</li>
          <li>Field-hash shots: +1.2 EPA/play.</li>
        </ul>
      </div>
    </aside>
  </section>

  <!-- MAIN -->
  <main>
    <article id="article" class="article">
      <div class="prose article-body">
        <img src="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" alt="Texas Longhorns vs Kentucky Wildcats — ESPN event graphic" class="header-image" referrerpolicy="no-referrer">
        <h1>Kentucky vs. Texas Football Preview – Oct. 18, 2025</h1>
        <h2>Opening Context</h2>
        <p>…(your original copy continues)…</p>
      </div>
    </article>

    <aside aria-label="Sidebar">
      <!-- Player Spotlight (compact rectangles) -->
      <div class="card pad mini-spotlight" id="miniSpotlight">
        <div class="kicker">Player Spotlight</div>
        <div id="miniFeatured" class="row" style="display:none"></div>

        <!-- Toggles -->
        <div class="toggles">
          <button class="chip" data-side="offense">Offense</button>
          <button class="chip" data-side="defense">Defense</button>
          <button class="chip" data-span="last">Last</button>
          <button class="chip" data-span="season">Season</button>
        </div>

        <!-- List -->
        <div id="miniList"></div>
        <div class="tiny">Auto-updating from official stats (falls back if offline).</div>
      </div>

      <!-- Newsletter -->
      <div class="card pad">
        <div class="kicker">Newsletter</div>
        <h3>Join the Film Room</h3>
        <p>One email after each game: charts, context, and a clean verdict.</p>
        <form action="#" method="post" onsubmit="alert('Stub — wire this to your email provider'); return false;">
          <label for="email" style="display:block;margin-bottom:6px">Email</label>
          <input id="email" name="email" type="email" required placeholder="you@example.com" style="width:100%;padding:12px;border-radius:10px;border:1px solid var(--muted);margin-bottom:10px" />
          <button type="submit" style="background:var(--ky-blue);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:700">Subscribe</button>
        </form>
      </div>

      <!-- About -->
      <div class="card pad" id="about">
        <div class="kicker">About</div>
        <p>Hashmark Chronicles is an independent Kentucky athletics outlet: film-first, data-backed, and unbothered by press-room groupthink. Football now; hoops soon.</p>
      </div>
    </aside>
  </main>

  <!-- Hardtop anchor (placeholder) -->
  <section id="hardtop" class="wrap" style="max-width:1100px;margin:0 auto 32px;">
    <div class="card pad">
      <div class="kicker">Hardtop</div>
      <h2>Basketball coverage returns this winter.</h2>
      <p>We’ll post scouting notes, tempo trends, and shooting gravity maps here.</p>
    </div>
  </section>

  <!-- The Pulse -->
  <section id="pulse" class="wrap" style="max-width:1100px;margin:0 auto 40px;">
    <div class="card pad">
      <div class="kicker">The Pulse</div>
      <h2 style="margin-top:6px">Live highlights & Kentucky feeds</h2>
      <p style="margin-bottom:12px">Embedded timelines for quick scrolling. Swap handles or add more as needed.</p>
      <div class="feeds">
        <div><a class="twitter-timeline" data-height="500" data-theme="light" data-chrome="noheader nofooter noborders transparent" href="https://twitter.com/UKFootball">Tweets by UKFootball</a></div>
        <div><a class="twitter-timeline" data-height="500" data-theme="light" data-chrome="noheader nofooter noborders transparent" href="https://twitter.com/UKAthletics">Tweets by UKAthletics</a></div>
        <div><a class="twitter-timeline" data-height="500" data-theme="light" data-chrome="noheader nofooter noborders transparent" href="https://twitter.com/KySportsRadio">Tweets by KySportsRadio</a></div>
      </div>
    </div>
  </section>

  <footer>
    <div class="cols">
      <div>
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <div class="hc-logo" aria-hidden="true"><span>HC</span></div>
          <div>
            <strong style="display:block;font:800 16px/1.2 'Franklin Gothic Medium','Arial Narrow',Arial,sans-serif; color:#e2e8f0">Hashmark Chronicles</strong>
            <span style="font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:#94a3b8">Kentucky Athletics Blog</span>
          </div>
        </div>
        <small style="color:#aab4d4">© <span id="year"></span> HC Media. Not affiliated with the University of Kentucky. Opinions are our own.</small>
      </div>
      <div>
        <div class="kicker" style="color:#c7d2fe">Links</div>
        <p><a href="https://twitter.com/HashmarkCFB" target="_blank" rel="noopener">X / Twitter</a> • <a href="#">TikTok</a> • <a href="#">YouTube</a></p>
      </div>
    </div>
  </footer>

  <!-- X/Twitter embeds -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

  <!-- ======== INLINE FALLBACK DATA (used only if ESPN fails) ======== -->
  <script type="application/json" id="fallback-ticker">
  [
    { "label":"Explosive PA rate", "value":"+6.3%", "trend":"good", "suffix":"vs base" },
    { "label":"Yds/Play (UK)", "value":"5.7", "trend":"good" },
    { "label":"Havoc Allowed", "value":"42%", "trend":"warn", "suffix":"steady" },
    { "label":"3rd & 6+ defense", "value":"46%", "trend":"bad", "suffix":"conv. allowed" },
    { "label":"Boley", "value":"885 yds • 4 TD", "trend":"good" }
  ]
  </script>

  <!-- Featured + Spotlight fallbacks (same shape you had) -->
  <script type="application/json" id="fallback-spotlight_featured">
  {"name":"Cutter Boley","pos":"QB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5141378.png","espn":"https://www.espn.com/college-football/player/_/id/5141378/cutter-boley","last_game":{"opp":"Texas","cmp_att":"31/39","yds":"258","td":"0","int":"1"},"season":{"cmp_pct":"64%","yds":"885","td":"4","int":"4"}}
  </script>
  <script type="application/json" id="fallback-spotlight_offense_last">
  [
    {"name":"Cutter Boley","pos":"QB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5141378.png","espn":"https://www.espn.com/college-football/player/_/id/5141378/cutter-boley","last_game":{"opp":"Texas","cmp_att":"31/39","yds":"258","td":"0","int":"1"}},
    {"name":"Seth McGowan","pos":"RB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4686468.png","espn":"https://www.espn.com/college-football/player/_/id/4686468/seth-mcgowan","last_game":{"opp":"Texas","rush":"14","yds":"45","td":"0","rec":"7","rec_yds":"68"}},
    {"name":"Kendrick Law","pos":"WR","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4685441.png","espn":"https://www.espn.com/college-football/player/_/id/4685441/kendrick-law","last_game":{"opp":"Texas","rec":"3","yds":"25","td":"0"}}
  ]
  </script>
  <script type="application/json" id="fallback-spotlight_offense_season">
  [
    {"name":"Seth McGowan","pos":"RB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4686468.png","espn":"https://www.espn.com/college-football/player/_/id/4686468/seth-mcgowan","season":{"car":"93","yds":"476","td":"7","avg":"5.1"}},
    {"name":"Cutter Boley","pos":"QB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5141378.png","espn":"https://www.espn.com/college-football/player/_/id/5141378/cutter-boley","season":{"cmp_pct":"64%","yds":"885","td":"4","int":"4"}},
    {"name":"Ja'Mori Maclin","pos":"WR","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4430270.png","espn":"https://www.espn.com/college-football/player/_/id/4430270/jamori-maclin","season":{"rec":"8","yds":"135","td":"0","avg":"16.9"}}
  ]
  </script>
  <script type="application/json" id="fallback-spotlight_defense_last">
  [
    {"name":"Alex Afari Jr.","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4819224.png","espn":"https://www.espn.com/college-football/player/_/id/4819224/alex-afari-jr","last_game":{"opp":"Texas","tkl":"7","tfl":"1","pbu":"1"}},
    {"name":"Daveren Rayner","pos":"LB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4430670.png","espn":"https://www.espn.com/college-football/player/_/id/4430670/daveren-rayner","last_game":{"opp":"Texas","tkl":"9","tfl":"1"}},
    {"name":"Jordan Lovett","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4683458.png","espn":"https://www.espn.com/college-football/player/_/id/4683458/jordan-lovett","last_game":{"opp":"Texas","tkl":"6"}}
  ]
  </script>
  <script type="application/json" id="fallback-spotlight_defense_season">
  [
    {"name":"Alex Afari Jr.","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4819224.png","espn":"https://www.espn.com/college-football/player/_/id/4819224/alex-afari-jr","season":{"tkl":"38","tfl":"4","pbu":"4"}},
    {"name":"Daveren Rayner","pos":"LB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4430670.png","espn":"https://www.espn.com/college-football/player/_/id/4430670/daveren-rayner","season":{"tkl":"42","tfl":"3","sck":"1"}},
    {"name":"DJ Waller Jr.","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5092262.png","espn":"https://www.espn.com/college-football/player/_/id/5092262/dj-waller-jr","season":{"tkl":"21","int":"1","pbu":"3"}}
  ]
  </script>
  <!-- ======== END INLINE FALLBACKS ======== -->

  <!-- Single inline script. Live ESPN + grading + banner wiring. -->
  <script>
(function start(run){ if(document.readyState!=='loading'){ run(); } else { document.addEventListener('DOMContentLoaded', run); } })(function(){
  (async function(){
    // ---------- CONFIG ----------
    const TEAM_ID = new URLSearchParams(location.search).get('team') || '96'; // Kentucky default
    const POLL_MS = 30_000;

    // ---------- UTILS ----------
    const log=(...a)=>console.log('[HC]',...a);
    const err=(...a)=>console.error('[HC]',...a);
    const clamp=(v,lo,hi)=>Math.max(lo,Math.min(hi,v));
    const scale=(v,lo,hi)=>clamp((v-lo)/(hi-lo),0,1);
    const headshot = id => id ? `https://a.espncdn.com/i/headshots/college-football/players/full/${id}.png` : '';
    const readInlineJSON = id => { const t=document.getElementById(id); if(!t) return null; try{return JSON.parse(t.textContent);}catch(e){return null;} };
    async function j(url){ const r=await fetch(url,{mode:'cors',cache:'no-store'}); if(!r.ok) throw new Error(r.status+' '+url); return r.json(); }

    function opponentFromComp(comp, teamId){
      const foes=(comp?.competitors||[]).filter(c=>String(c.team?.id)!==String(teamId));
      return foes[0]?.team?.displayName||'TBA';
    }
    function fmtKick(dateStr, networks){
      const d=new Date(dateStr);
      const when=isFinite(d)?d.toLocaleString(undefined,{weekday:'short',month:'short',day:'numeric',hour:'numeric',minute:'2-digit'}):'TBA';
      const tv=(networks&&networks[0])?(networks[0].shortName||networks[0].name||'TV TBA'):'TV TBA';
      return {when,tv};
    }
    function setKickoffUI(teamName, oppName, meta){
      const t=document.getElementById('nextTeamName');
      const o=document.getElementById('nextOpponent');
      const m=document.getElementById('nextMeta');
      if(t) t.textContent=teamName||'Kentucky';
      if(o) o.textContent=oppName||'[Opponent]';
      if(m) m.innerHTML=`Date • Time • TV: <b>${meta.when}</b> • <b>${meta.tv}</b>`;
    }

    // ---------- ESPN DISCOVERY ----------
    async function getTeamEnv(id){ try{ return await j(`https://site.api.espn.com/apis/site/v2/sports/football/college-football/teams/${id}`); }catch(e){ err('team env',e); return null; } }
    async function getSummary(eventId){ return await j(`https://site.api.espn.com/apis/site/v2/sports/football/college-football/summary?event=${eventId}`); }
    async function chooseEvent(env){
      const next=env?.team?.nextEvent?.[0], prev=env?.team?.previousEvent?.[0];
      async function tryOne(evt){ if(!evt?.id) return null; const sum=await getSummary(evt.id); const st=sum?.header?.competitions?.[0]?.status?.type?.state; return {id:evt.id,sum:sum,state:st}; }
      if(next){ const a=await tryOne(next); if(a && (a.state==='in'||a.state==='post')) return a; }
      if(prev){ const b=await tryOne(prev); if(b) return b; }
      return next? await tryOne(next): null;
    }

    // ---------- PARSERS ----------
    function buildMeta(labels=[], stats=[]){
      const m={};
      labels.forEach((lbl,i)=>{
        const v = stats?.[i];
        const toNum = s => s==null ? 0 : (typeof s==='number'?s:parseFloat(String(s).replace(/[^\d.-]/g,''))||0);
        const two = s => { const a=String(s||'').replace(/\s/g,'').split(/[\/-]/); return [toNum(a[0]),toNum(a[1]||0)] };
        const L=String(lbl).toUpperCase();
        if(L==='CMP-ATT'){ const [c,a]=two(v); m.cmp=c; m.att=a; }
        if(L==='CMP')   m.cmp=toNum(v);
        if(L==='ATT')   m.att=toNum(v);
        if(L==='REC')   m.rec=toNum(v);
        if(L==='CAR')   m.car=toNum(v);
        if(L==='YDS')   m.yds=toNum(v);
        if(L==='TD')    m.td =toNum(v);
        if(L==='INT')   m.int=toNum(v);
        if(L==='TOT')   m.tkl=toNum(v);
        if(L==='SOLO')  m.solo=toNum(v);
        if(L==='TFL')   m.tfl=toNum(v);
        if(L==='SCK' || L==='SACKS') m.sacks=toNum(v);
      });
      return m;
    }
    function makeRow(raw, statline, kind){
      const id = raw?.athlete?.id || raw?.id;
      const name = raw?.athlete?.displayName || raw?.displayName || 'Unknown';
      const pos  = raw?.athlete?.position?.abbreviation || raw?.position?.abbreviation || '';
      const link = id ? `https://www.espn.com/college-football/player/_/id/${id}` : '#';
      return { id, name, pos, headshot: headshot(id), espn: link, statline, kind, meta:{} };
    }

    function offenseFromBoxscore(sum, teamId){
      const blocks=sum?.boxscore?.players||[];
      const teamBlock=blocks.find(b=>String(b.team?.id)===String(teamId))||blocks[0];
      if(!teamBlock) return [];
      const cats={}; for(const c of (teamBlock.statistics||[])) cats[c.type]=c;

      const pick=(cat,kind)=>{
        if(!cat) return null;
        const L=cat.labels||[], rows=cat.athletes||[];
        const idxY = L.indexOf('YDS')>=0 ? L.indexOf('YDS') : 1;
        let best=null, bestY=-1;
        for(const r of rows){ const val=Number(String(r?.stats?.[idxY]||'0').replace(/[^\d.-]/g,''))||0; if(val>bestY){bestY=val;best=r;} }
        if(!best) return null;
        const meta = buildMeta(L,best.stats);
        const pretty = L.map((lbl,i)=>{ const map={'CMP-ATT':'CMP/ATT','YDS':'YDS','TD':'TD','INT':'INT','CAR':'CAR','REC':'REC'}; const val=best.stats?.[i]; if(val==null) return null; return `${map[lbl]||lbl} ${val}`; }).filter(Boolean).slice(0,3).join(' • ');
        const row = makeRow(best, pretty, kind); row.meta=meta; return row;
      };

      const pass = pick(cats.passing,'pass');
      const rush = pick(cats.rushing,'rush');
      const recv = pick(cats.receiving,'recv');
      return [pass,rush,recv].filter(Boolean);
    }

    // Leaders fallback (parse displayValue like "27-41, 301 YDS, 2 TD, 1 INT")
    function parseLeaderDisplayValue(s=''){
      const m={};
      const cmpatt=s.match(/(\d+)\s*[-/]\s*(\d+)/i); if(cmpatt){ m.cmp=+cmpatt[1]; m.att=+cmpatt[2]; }
      const yds  =s.match(/(\d+)\s*YDS/i); if(yds) m.yds=+yds[1];
      const td   =s.match(/(\d+)\s*TD(?!-)/i); if(td) m.td=+td[1];
      const ints =s.match(/(\d+)\s*INT/i); if(ints) m.int=+ints[1];
      const rec  =s.match(/(\d+)\s*REC/i); if(rec) m.rec=+rec[1];
      const car  =s.match(/(\d+)\s*CAR/i); if(car) m.car=+car[1];
      const tkl  =s.match(/(\d+)\s*(?:TOT|TKL)/i); if(tkl) m.tkl=+tkl[1];
      const sck  =s.match(/(\d+(?:\.\d+)?)\s*(?:SCK|SACKS)/i); if(sck) m.sacks=+sck[1];
      const tfl  =s.match(/(\d+)\s*TFL/i); if(tfl) m.tfl=+tfl[1];
      return m;
    }
    function offenseFromLeaders(sum, teamId){
      const comp=sum?.header?.competitions?.[0]; if(!comp) return [];
      const me=comp.competitors?.find(c=>String(c.team?.id)===String(teamId));
      const groups=me?.leaders||sum?.leaders||[];
      function get(keys,kind){
        const g=(groups||[]).find(x=>{
          const n=(x?.name||x?.shortDisplayName||x?.displayName||'').toLowerCase();
          return keys.some(k=>n.includes(k));
        });
        const lead=g?.leaders?.[0]; if(!lead) return null;
        const row=makeRow(lead, lead.displayValue||lead.value||'', kind);
        row.meta=parseLeaderDisplayValue(lead.displayValue||'');
        return row;
      }
      const pass=get(['pass','qb','cmp','yds'],'pass');
      const rush=get(['rush','rb','car'],'rush');
      const recv=get(['receiv','wr','rec'],'recv');
      return [pass,rush,recv].filter(Boolean);
    }

    function defenseFromBoxscore(sum, teamId){
      const blocks=sum?.boxscore?.players||[];
      const teamBlock=blocks.find(b=>String(b.team?.id)===String(teamId))||blocks[0];
      if(!teamBlock) return [];
      const cats={}; for(const c of (teamBlock.statistics||[])) cats[c.type]=c;
      const def=cats.defensive||cats.defense; if(!def) return [];
      const L=def.labels||[], rows=def.athletes||[];
      const iTOT=L.indexOf('TOT'), iSOLO=L.indexOf('SOLO');

      const sorted=rows.slice().sort((a,b)=>{
        const A=Number(String(a?.stats?.[iTOT]||'0').replace(/[^\d.-]/g,''))||0;
        const B=Number(String(b?.stats?.[iTOT]||'0').replace(/[^\d.-]/g,''))||0;
        if(B!==A) return B-A;
        const As=Number(String(a?.stats?.[iSOLO]||'0').replace(/[^\d.-]/g,''))||0;
        const Bs=Number(String(b?.stats?.[iSOLO]||'0').replace(/[^\d.-]/g,''))||0;
        return Bs-As;
      }).slice(0,3);

      return sorted.map(r=>{
        const meta=buildMeta(L,r.stats);
        const parts=[];
        const push=(label,pretty)=>{ const i=L.indexOf(label); const val=r.stats?.[i]; if(i>=0 && val!=null) parts.push(`${pretty} ${val}`); };
        push('TOT','TKL'); push('TFL','TFL'); push('SCK','SACKS'); push('SACKS','SACKS'); push('INT','INT');
        const row=makeRow(r, parts.slice(0,3).join(' • '), 'def');
        row.meta=meta; return row;
      });
    }
    function defenseFromLeaders(sum, teamId){
      const comp=sum?.header?.competitions?.[0];
      const me=comp?.competitors?.find(c=>String(c.team?.id)===String(teamId));
      const groups=me?.leaders||sum?.leaders||[];
      const tackles=(groups||[]).find(x=>((x?.name||x?.shortDisplayName||'').toLowerCase()).includes('tackle'));
      const lead=tackles?.leaders?.[0];
      if(!lead) return [];
      const row=makeRow(lead, lead.displayValue||'', 'def');
      row.meta=parseLeaderDisplayValue(lead.displayValue||'');
      return [row];
    }

    // ---------- GRADING ----------
    function gradePassing(m){
      const att=+m.att||0, cmp=+m.cmp||0, yds=+m.yds||0, td=+m.td||0, ints=+m.int||0;
      const PR = att ? (8.4*yds + 330*td + 100*cmp - 200*ints)/att : 0; // NCAA
      const eff = scale(PR, 85, 175);
      const use = scale(att, 10, 38);
      return 100*(0.85*eff + 0.15*use);
    }
    function gradeRushing(m){
      const car=+m.car||0, yds=+m.yds||0, td=+m.td||0;
      const ypc = car? yds/car : 0;
      return 100*(0.50*scale(ypc,3.2,7.2) + 0.25*scale(yds,40,180) + 0.10*scale(car,8,24) + 0.15*scale(td,0,3));
    }
    function gradeReceiving(m){
      const rec=+m.rec||0, yds=+m.yds||0, td=+m.td||0;
      const ypr = rec? yds/rec : 0;
      return 100*(0.40*scale(ypr,9,22) + 0.30*scale(yds,40,150) + 0.10*scale(rec,4,12) + 0.20*scale(td,0,2));
    }
    function gradeDefense(m){
      const tkl=+m.tkl||0, tfl=+m.tfl||0, sacks=+(m.sacks||m.sck||0), it=+m.int||0;
      return 100*(0.45*scale(tkl,3,12) + 0.25*scale(sacks,0,2) + 0.20*scale(tfl,0,3) + 0.10*scale(it,0,1));
    }
    function gradeFor(row){
      let g=75;
      if(row.kind==='pass') g=gradePassing(row.meta||{});
      else if(row.kind==='rush') g=gradeRushing(row.meta||{});
      else if(row.kind==='recv') g=gradeReceiving(row.meta||{});
      else if(row.kind==='def')  g=gradeDefense(row.meta||{});
      return clamp(g, 20, 100); // sanity clamp
    }
    function letterFrom(score){
      const s = Math.round(score);
      const band = s>=85 ? 'good' : s>=70 ? 'warn' : 'bad';
      const ranges = [
        [97,'A','+'],[93,'A',''],[90,'A','-'],
        [87,'B','+'],[83,'B',''],[80,'B','-'],
        [77,'C','+'],[73,'C',''],[70,'C','-'],
        [67,'D','+'],[63,'D',''],[60,'D','-'],
        [0, 'F','']
      ];
      for(const [cut, L, sign] of ranges){ if(s>=cut) return {band, letter:L, sign:sign, pct:s}; }
      return {band:'bad', letter:'F', sign:'', pct:s};
    }

    // Trend vs trailing average of stored grades for this player
    let CURRENT_EVENT_ID = null;
    function trendFor(playerId, score){
      if(!playerId || !CURRENT_EVENT_ID) return 'flat';
      const key = 'hc_hist_' + playerId;
      let hist; try{ hist=JSON.parse(localStorage.getItem(key)||'null'); }catch(e){}
      if(!hist) hist={grades:[], events:[]};

      // compute vs trailing 3 (not counting this event if already stored)
      const last3 = hist.grades.slice(-3);
      const avg = last3.length ? last3.reduce((a,b)=>a+b,0)/last3.length : null;
      const delta = avg==null ? 0 : (score - avg);
      const tr = avg==null ? 'flat' : (delta>=2 ? 'up' : (delta<=-2 ? 'down' : 'flat'));

      // persist if this event not yet recorded
      if(hist.events[hist.events.length-1] !== CURRENT_EVENT_ID){
        hist.grades.push(Math.round(score));
        hist.events.push(CURRENT_EVENT_ID);
        if(hist.grades.length>8){ hist.grades=hist.grades.slice(-8); hist.events=hist.events.slice(-8); }
        try{ localStorage.setItem(key, JSON.stringify(hist)); }catch(e){}
      }
      return tr;
    }

    // ---------- UI ----------
    const wrap=document.getElementById('miniSpotlight');
    const list=document.getElementById('miniList');
    const featuredEl=document.getElementById('miniFeatured');

    function rowHTML(p){
      const initials=(p.name||'').split(/\s+/).map(s=>s[0]).slice(0,2).join('').toUpperCase()||'UK';
      const G = letterFrom(p.grade||75);
      const arrow = p.trend==='up'?'▲':(p.trend==='down'?'▼':'—');
      return `
        <div class="row">
          <div class="info">
            <img src="${p.headshot||''}" alt="${p.name} headshot"
                 onerror="this.replaceWith((()=>{const d=document.createElement('div');d.style.cssText='width:48px;height:48px;border-radius:8px;display:grid;place-items:center;background:#0033a0;color:#fff;font:800 14px/1 system-ui';d.textContent='${initials}';return d;})())">
            <div>
              <div class="who">${p.name} <span class="tiny">• ${p.pos||''}</span></div>
              <div class="stat">${p.statline||''} <a href="${p.espn||'#'}" target="_blank" rel="noopener" class="tiny">ESPN ↗</a></div>
            </div>
          </div>
          <div class="grade-chip ${G.band}" aria-label="HC Grade">
            <div class="letter">${G.letter}${G.sign}</div>
            <div class="pct">${G.pct}%</div>
            <div class="trend ${p.trend||'flat'}">${arrow}</div>
          </div>
        </div>`;
    }
    function renderList(arr){ list.innerHTML = (arr&&arr.length)? arr.slice(0,3).map(rowHTML).join('') : '<div class="tiny">No data available.</div>'; }

    // ---------- STATE ----------
    let side='offense', span='last';
    let LIVE={ offense_last:[], defense_last:[] };
    wrap?.querySelectorAll('.chip').forEach(btn=>{
      btn.addEventListener('click',()=>{
        if(btn.dataset.side) side=btn.dataset.side;
        if(btn.dataset.span) span=btn.dataset.span;
        wrap.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
        wrap.querySelectorAll(`.chip[data-side="${side}"]`).forEach(c=>c.classList.add('active'));
        wrap.querySelectorAll(`.chip[data-span="${span}"]`).forEach(c=>c.classList.add('active'));
        loadMini();
      });
    });
    wrap?.querySelector(`.chip[data-side="${side}"]`)?.classList.add('active');
    wrap?.querySelector(`.chip[data-span="${span}"]`)?.classList.add('active');

    // ---------- Ticker (inline only; unchanged) ----------
    (function(){
      const items=readInlineJSON('fallback-ticker');
      const track=document.getElementById('tickerTrack');
      if(Array.isArray(items)&&track){
        track.innerHTML=items.map(it=>{
          const trend=it.trend||'warn';
          const suffix=it.suffix?(' '+it.suffix):'';
          return `<li><span class="trend-dot ${trend}" aria-hidden="true"></span><span class="label"><strong>${it.label}</strong> <span class="trend-value ${trend}">${it.value}</span>${suffix}</span></li>`;
        }).join('');
      }
    })();

    // ---------- Inline Spotlight first paint ----------
    (function drawInlineFirst(){
      const feat=readInlineJSON('fallback-spotlight_featured');
      if(feat&&feat.name&&featuredEl){
        const stat = Object.entries(feat.last_game||feat.season||{}).slice(0,3).map(([k,v])=>`${k.toUpperCase().replace('_','-')} ${v}`).join(' • ');
        const idFromHead = (feat.headshot||'').match(/players\/full\/(\d+)/)?.[1] || null;
        const r={ id:idFromHead, name:feat.name, pos:feat.pos, headshot:feat.headshot, espn:feat.espn, statline:stat, kind:(feat.pos==='QB'?'pass':'rush'), meta:{} };
        // quick meta for grade
        if(feat.last_game?.cmp_att){ const [c,a]=String(feat.last_game.cmp_att).split('/'); r.meta={cmp:+c||0, att:+a||0, yds:+(feat.last_game.yds||0), td:+(feat.last_game.td||0), int:+(feat.last_game.int||0)}; r.kind='pass'; }
        else if(feat.last_game?.rush){ r.meta={car:+(feat.last_game.rush||0), yds:+(feat.last_game.yds||0), td:+(feat.last_game.td||0)}; r.kind='rush'; }
        else if(feat.last_game?.rec){ r.meta={rec:+(feat.last_game.rec||0), yds:+(feat.last_game.yds||0), td:+(feat.last_game.td||0)}; r.kind='recv'; }
        r.grade = gradeFor(r); r.trend='flat';
        featuredEl.innerHTML=rowHTML(r); featuredEl.style.display='flex';
      }
      loadMini(); // until LIVE arrives
    })();

    function adaptInlineList(which){
      const arr = readInlineJSON(which) || [];
      const out = arr.map(p=>{
        const stat = Object.entries((p.last_game||p.season||{})).slice(0,3).map(([k,v])=>`${k.toUpperCase().replace('_','-')} ${v}`).join(' • ');
        const idFromHead=(p.headshot||'').match(/players\/full\/(\d+)/)?.[1] || null;
        const row = { id:idFromHead, name:p.name, pos:p.pos, headshot:p.headshot, espn:p.espn, statline:stat, kind:'recv', meta:{} };
        if(p.last_game?.cmp_att){ const [c,a]=String(p.last_game.cmp_att).split('/'); row.meta={cmp:+c||0, att:+a||0, yds:+(p.last_game.yds||0), td:+(p.last_game.td||0), int:+(p.last_game.int||0)}; row.kind='pass'; }
        else if(p.last_game?.rush){ row.meta={car:+(p.last_game.rush||0), yds:+(p.last_game.yds||0), td:+(p.last_game.td||0)}; row.kind='rush'; }
        else if(p.last_game?.rec){ row.meta={rec:+(p.last_game.rec||0), yds:+(p.last_game.yds||0), td:+(p.last_game.td||0)}; row.kind='recv'; }
        else if(p.season?.tkl){ row.meta={tkl:+(p.season.tkl||0), tfl:+(p.season.tfl||0), sacks:+(p.season.sck||0), int:+(p.season.int||0)}; row.kind='def'; }
        row.grade=gradeFor(row); row.trend='flat';
        return row;
      });
      return out;
    }

    function loadMini(){
      if(span==='last'){
        const arr = side==='offense' ? LIVE.offense_last : LIVE.defense_last;
        if(arr && arr.length){ renderList(arr); return; }
      }
      // inline fallback if no LIVE yet
      const key = `fallback-spotlight_${side}_${span}`;
      renderList(adaptInlineList(key));
    }

    // ---------- LIVE BOOT ----------
    async function bootLive(){
      const env = await getTeamEnv(TEAM_ID);
      if(env){
        const teamName=env?.team?.displayName||'Kentucky';
        const nxt=env?.team?.nextEvent?.[0] || env?.team?.previousEvent?.[0];
        if(nxt){
          const comp=nxt.competitions?.[0];
          const meta=fmtKick(nxt.date || comp?.date, comp?.broadcasts || comp?.broadcast || []);
          setKickoffUI(teamName, opponentFromComp(comp,TEAM_ID), meta);
        }
      }
      const pick = await chooseEvent(env);
      if(!pick){ log('no event; inline only'); return; }
      CURRENT_EVENT_ID = pick.id;

      // offense
      let off = offenseFromBoxscore(pick.sum, TEAM_ID);
      if(!off.length){ off = offenseFromLeaders(pick.sum, TEAM_ID); log('offense: leaders fallback'); }
      off = off.map(r=>{ r.grade=gradeFor(r); r.trend=trendFor(r.id, r.grade); return r; });

      // defense
      let def = defenseFromBoxscore(pick.sum, TEAM_ID);
      if(!def.length){ def = defenseFromLeaders(pick.sum, TEAM_ID); log('defense: leaders fallback'); }
      def = def.map(r=>{ r.grade=gradeFor(r); r.trend=trendFor(r.id, r.grade); return r; });

      LIVE.offense_last = off;
      LIVE.defense_last = def;

      // Featured from live
      const first = (off && off[0]) || (def && def[0]);
      if(first && featuredEl){ featuredEl.innerHTML=rowHTML(first); featuredEl.style.display='flex'; }
      if(span==='last'){ loadMini(); }
    }

    await bootLive();
    setInterval(bootLive, POLL_MS);

    // footer year
    const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear();
  })();
});
</script>
</body>
</html>
