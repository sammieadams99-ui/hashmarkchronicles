<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hashmark Chronicles — Kentucky Athletics Blog</title>
  <meta name="description" content="Independent Kentucky football analysis with film-room breakdowns, data-driven previews, and postgame reviews. Hoops coverage coming soon." />
  <link rel="canonical" href="https://hashmarkchronicles.online/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Hashmark Chronicles — Kentucky Athletics Blog" />
  <meta property="og:description" content="Independent Kentucky football analysis with film-room breakdowns, data-driven previews, and postgame reviews." />
  <meta property="og:image" content="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" />
  <meta property="og:url" content="https://hashmarkchronicles.online/" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@HashmarkCFB" />
  <meta name="twitter:title" content="Hashmark Chronicles — Kentucky Athletics Blog" />
  <meta name="twitter:description" content="Independent Kentucky football analysis with film-room breakdowns, data-driven previews, and postgame reviews." />
  <meta name="twitter:image" content="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" />

  <!-- Retro font (ticker only) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --ky-blue:#0033a0; --ink:#0b0d12; --paper:#ffffff; --muted:#eef1f6; --hc-green:#39ff14;
      --accent:#1b75ff; --shadow:0 6px 24px rgba(0,0,0,.12); --radius:18px;
      --good:#16a34a; --bad:#dc2626; --warn:#d97706;
      --pillA:#0ea5e9; --pillB:#6366f1; --pillC:#f59e0b; --pillD:#ef4444; --pillF:#111827;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:Georgia,Times,"Times New Roman",serif;color:var(--ink);background:#f7f8fb;line-height:1.6}
    a{color:var(--ky-blue);text-decoration:none} a:hover{color:var(--accent)}

    .bar{background:var(--ink);color:var(--paper);font:500 14px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:8px 16px;display:flex;align-items:center;justify-content:center;gap:10px}
    .bar .dot{width:8px;height:8px;border-radius:50%;background:var(--hc-green);display:inline-block}

    header{position:sticky;top:0;z-index:50;backdrop-filter:blur(8px);background:rgba(255,255,255,.85);border-bottom:2px solid var(--muted)}
    .wrap{max-width:1100px;margin:auto;padding:16px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:16px}

    .brand{display:flex;align-items:center;gap:14px}
    .hc-logo{width:56px;height:56px;border-radius:12px;position:relative;overflow:hidden;background:var(--ky-blue);box-shadow:var(--shadow);display:grid;place-items:center}
    .hc-logo span{font:italic 800 28px/1 system-ui,-apple-system,Segoe UI,Arial,sans-serif;color:#fff;letter-spacing:.5px;transform:translateY(3px)}
    .hc-logo::before{content:"";position:absolute;top:8px;left:8px;right:8px;height:5px;border-radius:5px;background:linear-gradient(90deg,transparent 0%,var(--hc-green) 35%,var(--hc-green) 65%,transparent 100%);filter:drop-shadow(0 0 6px rgba(57,255,20,.6));animation:swipe 2.8s ease-in-out infinite;opacity:.95}
    @keyframes swipe{0%{transform:translateX(-120%)}40%{transform:translateX(0)}60%{transform:translateX(0)}100%{transform:translateX(120%)}}
    .brand-title{display:flex;flex-direction:column}
    .brand-title strong{font:800 20px/1.2 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:var(--ink)}
    .brand-title small{font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#4a5568;letter-spacing:.5px}

    nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    nav a{font:600 14px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

    .chip-x{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--ky-blue);background:#fff;color:var(--ky-blue);font:700 12px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;transition:background .15s,color .15s,border-color .15s}
    .chip-x:hover{background:var(--ky-blue);color:#fff;border-color:var(--ky-blue)}
    .chip-x .x-glyph{font-weight:900;font-size:14px;line-height:1;display:inline-block;transform:translateY(-1px)}

    .ticker{width:100%;background:#fff;color:#0b0d12;border-top:3px solid var(--ky-blue);border-bottom:1px solid var(--muted);overflow:hidden}
    .ticker__track{display:flex;gap:40px;list-style:none;margin:0;padding:6px 0 6px 100%;font-family:'Press Start 2P',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;font-size:11px;line-height:1.1;white-space:nowrap;animation:hc-marquee 28s linear infinite}
    @keyframes hc-marquee{to{transform:translateX(-100%)}}
    .ticker:hover .ticker__track{animation-play-state:paused}
    @media (prefers-reduced-motion:reduce){.ticker__track{animation:none;padding-left:16px}}
    .ticker__track.trend li{display:inline-flex;align-items:baseline;gap:6px}
    .trend-dot{width:7px;height:7px;border-radius:50%}
    .label{color:#0b0d12}
    .trend-value.good{color:#16a34a}.trend-value.bad{color:#dc2626}.trend-value.warn{color:#d97706}
    .trend-dot.good{background:#16a34a}.trend-dot.bad{background:#dc2626}.trend-dot.warn{background:#d97706}

    .hero{max-width:1100px;margin:24px auto;display:grid;grid-template-columns:1.2fr .8fr;gap:24px}
    .card{background:var(--paper);border:1px solid var(--muted);border-radius:var(--radius);box-shadow:var(--shadow)}
    .card .pad{padding:20px}
    .hero .feature img{display:block;width:100%;height:auto;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}
    .kicker{font:700 12px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;text-transform:uppercase;letter-spacing:.12em;color:var(--ky-blue)}
    h1,h2,h3{font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#0b0d12}
    h1{font-size:32px;margin:8px 0 14px} h2{font-size:22px;margin:0 0 10px} p{margin:0 0 12px}

    .block{padding:16px;border-top:3px solid var(--ky-blue)}
    .stat-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .stat{background:#f3f6fb;border:1px solid var(--muted);border-radius:12px;padding:10px}
    .stat b{display:block;font:800 18px/1.1 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif}
    .stat span{font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#475569}

    main{max-width:1100px;margin:0 auto 48px;display:grid;grid-template-columns:1fr .38fr;gap:24px}
    article{background:var(--paper);border:1px solid var(--muted);border-radius:var(--radius);box-shadow:var(--shadow)}
    .prose{padding:24px}.prose h2{margin-top:22px}
    .callout{border-left:4px solid var(--hc-green);background:#f4fff2;padding:12px 14px;border-radius:12px;margin:14px 0}

    .article-body h1{font-size:2.2em;border-bottom:2px solid #003087;padding-bottom:.3em;margin-top:.5rem}
    .header-image,.atmosphere-image,.special-teams-image{width:100%;height:auto;margin:1em 0;border-radius:6px;display:block}
    .video-container{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;margin:1em 0;background:#000 url('https://via.placeholder.com/800x450?text=Video+Loading') center/cover}
    .video-container iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}
    blockquote.twitter-tweet{margin:1em auto;border-left:4px solid #003087;padding-left:1em}
    .tweet-embed figcaption{color:#444;font-size:.9em;text-align:center;margin-top:.4rem}
    table{width:100%;border-collapse:collapse;margin:1em 0;font-size:.9em}
    th,td{border:1px solid #ddd;padding:.75em;text-align:left}
    th{background:#003087;color:#fff;font-weight:700}
    tr:nth-child(even){background:#f9f9f9}
    .pull-quote{font-size:1.1em;font-style:italic;color:#333;border-left:4px solid #bf5700;padding:.5em 1em;margin:1.5em 0}
    .section-divider{height:2px;background:linear-gradient(to right,#003087,#bf5700);margin:2rem 0}

    /* Player spotlight rows */
    .mini-spotlight .row{display:flex;gap:10px;align-items:center;padding:8px;border:1px solid var(--muted);border-radius:10px;background:#fff;margin:8px 0}
    .mini-spotlight .row:hover{background:#f3f6fb}
    .mini-spotlight img{width:48px;height:48px;border-radius:8px;object-fit:cover;border:1px solid var(--muted)}
    .mini-spotlight .who{font:700 14px/1.2 "Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#0b0d12}
    .mini-spotlight .stat{font:600 12px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#475569}
    .mini-spotlight .tiny{font:600 11px/1 system-ui;color:#64748b}
    .mini-spotlight .toggles{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 8px}
    .mini-spotlight .chip{border:1px solid var(--muted);border-radius:999px;padding:6px 10px;background:#fff;font:700 12px/1 system-ui;cursor:pointer}
    .mini-spotlight .chip.active{background:#0033a0;color:#fff;border-color:#0033a0}

    /* Grade pill (compact, at far right) */
    .gradebox{margin-left:auto;display:flex;align-items:center;gap:6px}
    .grade-pill{display:inline-flex;align-items:center;justify-content:center;padding:4px 8px;border-radius:999px;font:800 12px/1 system-ui;color:#fff;min-width:34px}
    .grade-A{background:linear-gradient(90deg,var(--pillA),#06b6d4)}
    .grade-B{background:linear-gradient(90deg,var(--pillB),#22c55e)}
    .grade-C{background:linear-gradient(90deg,var(--pillC),#f97316)}
    .grade-D{background:linear-gradient(90deg,var(--pillD),#b91c1c)}
    .grade-F{background:linear-gradient(90deg,var(--pillF),#6b7280)}
    .grade-pct{font:700 11px/1 system-ui;color:#64748b}

    #pulse .feeds{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:980px){#pulse .feeds{grid-template-columns:1fr}}

    footer{background:var(--ink);color:#c7d2fe;padding:28px 0;margin-top:40px}
    footer .cols{max-width:1100px;margin:auto;display:grid;grid-template-columns:1fr 1fr;gap:18px}
    footer a{color:#c7d2fe}

    @media (max-width:980px){
      .hero,main{grid-template-columns:1fr}
      nav ul{flex-wrap:wrap}
      .article-body h1{font-size:1.8em}
    }
    /* --- Spotlight grade badge + trend (add) --- */
.mini-spotlight .row{ justify-content:space-between; }
.grade-wrap{ margin-left:auto; display:flex; align-items:center; gap:8px; }
.grade-badge{
  min-width:46px; text-align:center; padding:6px 10px; border-radius:12px;
  font:800 14px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:#fff;
  box-shadow: 0 1px 0 rgba(0,0,0,.05), 0 6px 18px rgba(0,0,0,.08);
}
.grade-badge small{ display:block; font:700 10px/1 system-ui; opacity:.95; margin-top:2px; color:#f1f5f9 }
.grade-A{ background:#16a34a }  /* A band */
.grade-B{ background:#0ea5e9 }  /* B band */
.grade-C{ background:#d97706 }  /* C band */
.grade-D{ background:#ef4444 }  /* D band */
.grade-F{ background:#111827 }  /* F band */
.trend{ font:900 12px/1 system-ui; }
.trend.up{ color:#16a34a } .trend.down{ color:#ef4444 } .trend.flat{ color:#64748b }

  </style>
</head>
<body>
  <div class="bar"><span class="dot"></span> Kentucky Football • Independent film-room analysis & previews • HC Hoops returns this winter</div>

  <header>
    <div class="wrap row">
      <div class="brand">
        <div class="hc-logo" aria-label="Hashmark Chronicles logo"><span>HC</span></div>
        <div class="brand-title">
          <strong>Hashmark Chronicles</strong>
          <small>Kentucky Athletics Blog</small>
        </div>
      </div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#article">Gridiron</a></li>
          <li><a href="#hardtop">Hardtop</a></li>
          <li><a href="#pulse">The Pulse</a></li>
          <li><a href="/posts/library.html">Articles</a></li>
          <li><a href="#about">About</a></li>
          <li>
            <a class="chip-x" href="https://x.com/HashmarkCFB" target="_blank" rel="me noopener" aria-label="Follow @HashmarkCFB on X">
              <span class="x-glyph" aria-hidden="true">𝕏</span><span>@HashmarkCFB</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- TICKER -->
  <div class="ticker" aria-label="Season leaders & trending stats">
    <ul class="ticker__track trend" id="tickerTrack">
      <li><span class="trend-dot good"></span><span class="label"><strong>Explosive PA rate</strong> <span class="trend-value good">+6.3%</span> vs base</span></li>
      <li><span class="trend-dot good"></span><span class="label"><strong>Yds/Play (UK)</strong> <span class="trend-value good">5.7</span></span></li>
      <li><span class="trend-dot warn"></span><span class="label"><strong>Havoc Allowed</strong> <span class="trend-value warn">42%</span> steady</span></li>
      <li><span class="trend-dot bad"></span><span class="label"><strong>3rd &amp; 6+ defense</strong> <span class="trend-value bad">46%</span> conv. allowed</span></li>
      <li><span class="trend-dot good"></span><span class="label"><strong>Boley</strong> <span class="trend-value good">885 yds • 4 TD</span></span></li>
    </ul>
  </div>

  <!-- HERO -->
  <section class="hero">
    <article class="card feature" itemscope itemtype="https://schema.org/Article">
      <img src="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" alt="Texas Longhorns vs Kentucky Wildcats — ESPN event graphic" />
      <div class="pad">
        <div class="kicker">Game Preview</div>
        <h1 itemprop="headline">Kentucky vs. Texas — Oct. 18, 2025</h1>
        <p itemprop="description">Your full preview: atmosphere, QB breakdowns, trench warfare, special teams, and the upset call.</p>
        <p><a href="#article">Read the breakdown →</a></p>
      </div>
    </article>

    <aside class="card">
      <div class="block">
        <div class="kicker">Next Kickoff</div>
        <h2><span id="nextTeamName">Kentucky</span> @ <span id="nextOpponent" style="white-space:nowrap">[Opponent]</span></h2>
        <p id="nextMeta">Date • Time • TV: <b>ESPN</b></p>

        <!-- LIVE banner stats -->
        <div class="stat-grid" id="bannerStats" style="margin-top:10px">
          <div class="stat"><b id="statYPP">–</b><span>Yards/Play (UK)</span></div>
          <div class="stat"><b id="stat3D">–</b><span>3rd Down</span></div>
          <div class="stat"><b id="statTO">–</b><span>Turnovers</span></div>
          <div class="stat"><b id="statTOP">–</b><span>Time of Poss</span></div>
        </div>
      </div>

      <div class="block">
        <div class="kicker">Hashmarks</div>
        <p style="margin:8px 0 12px">Quick-hit trends we’re tracking.</p>
        <ul>
          <li>RPO usage climbing on 2nd-and-medium.</li>
          <li>Boundary corner blitz ~12% vs heavy sets.</li>
          <li>Field-hash shots: +1.2 EPA/play.</li>
        </ul>
      </div>
    </aside>
  </section>

  <!-- MAIN -->
  <main>
    <article id="article" class="article">
      <div class="prose article-body">
        <img src="https://artwork.espncdn.com/events/401752743/16x9/1280x720_20250324202019.png" alt="Texas Longhorns vs Kentucky Wildcats — ESPN event graphic" class="header-image" referrerpolicy="no-referrer">
        <h1>Kentucky vs. Texas Football Preview – Oct. 18, 2025</h1>
        <h2>Opening Context</h2>
        <p>…(your original copy continues)…</p>
      </div>
    </article>

    <aside aria-label="Sidebar">
      <div class="card pad mini-spotlight" id="miniSpotlight">
        <div class="kicker">Player Spotlight</div>
        <div id="miniFeatured" class="row" style="display:none"></div>

        <div class="toggles">
          <button class="chip" data-side="offense">Offense</button>
          <button class="chip" data-side="defense">Defense</button>
          <button class="chip" data-span="last">Last</button>
          <button class="chip" data-span="season">Season</button>
        </div>

        <div id="miniList"></div>
        <div class="tiny">Auto-updating from official stats (falls back if offline).</div>
      </div>

      <div class="card pad">
        <div class="kicker">Newsletter</div>
        <h3>Join the Film Room</h3>
        <p>One email after each game: charts, context, and a clean verdict.</p>
        <form action="#" method="post" onsubmit="alert('Stub — wire this to your email provider'); return false;">
          <label for="email" style="display:block;margin-bottom:6px">Email</label>
          <input id="email" name="email" type="email" required placeholder="you@example.com" style="width:100%;padding:12px;border-radius:10px;border:1px solid var(--muted);margin-bottom:10px" />
          <button type="submit" style="background:var(--ky-blue);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:700">Subscribe</button>
        </form>
      </div>

      <div class="card pad" id="about">
        <div class="kicker">About</div>
        <p>Hashmark Chronicles is an independent Kentucky athletics outlet: film-first, data-backed, and unbothered by press-room groupthink. Football now; hoops soon.</p>
      </div>
    </aside>
  </main>

  <section id="hardtop" class="wrap" style="max-width:1100px;margin:0 auto 32px;">
    <div class="card pad">
      <div class="kicker">Hardtop</div>
      <h2>Basketball coverage returns this winter.</h2>
      <p>We’ll post scouting notes, tempo trends, and shooting gravity maps here.</p>
    </div>
  </section>

  <section id="pulse" class="wrap" style="max-width:1100px;margin:0 auto 40px;">
    <div class="card pad">
      <div class="kicker">The Pulse</div>
      <h2 style="margin-top:6px">Live highlights & Kentucky feeds</h2>
      <p style="margin-bottom:12px">Embedded timelines for quick scrolling. Swap handles or add more as needed.</p>
      <div class="feeds">
        <div><a class="twitter-timeline" data-height="500" data-theme="light" data-chrome="noheader nofooter noborders transparent" href="https://twitter.com/UKFootball">Tweets by UKFootball</a></div>
        <div><a class="twitter-timeline" data-height="500" data-theme="light" data-chrome="noheader nofooter noborders transparent" href="https://twitter.com/UKAthletics">Tweets by UKAthletics</a></div>
        <div><a class="twitter-timeline" data-height="500" data-theme="light" data-chrome="noheader nofooter noborders transparent" href="https://twitter.com/KySportsRadio">Tweets by KySportsRadio</a></div>
      </div>
    </div>
  </section>

  <footer>
    <div class="cols">
      <div>
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <div class="hc-logo" aria-hidden="true"><span>HC</span></div>
          <div>
            <strong style="display:block;font:800 16px/1.2 'Franklin Gothic Medium','Arial Narrow',Arial,sans-serif;color:#e2e8f0">Hashmark Chronicles</strong>
            <span style="font:600 12px/1.2 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#94a3b8">Kentucky Athletics Blog</span>
          </div>
        </div>
        <small style="color:#aab4d4">© <span id="year"></span> HC Media. Not affiliated with the University of Kentucky. Opinions are our own.</small>
      </div>
      <div>
        <div class="kicker" style="color:#c7d2fe">Links</div>
        <p><a href="https://twitter.com/HashmarkCFB" target="_blank" rel="noopener">X / Twitter</a> • <a href="#">TikTok</a> • <a href="#">YouTube</a></p>
      </div>
    </div>
  </footer>

  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

  <!-- ======== INLINE FALLBACK DATA (only used if ESPN parsing fails) ======== -->
  <script type="application/json" id="fallback-ticker">
  [
    { "label":"Explosive PA rate", "value":"+6.3%", "trend":"good", "suffix":"vs base" },
    { "label":"Yds/Play (UK)", "value":"5.7", "trend":"good" },
    { "label":"Havoc Allowed", "value":"42%", "trend":"warn", "suffix":"steady" },
    { "label":"3rd & 6+ defense", "value":"46%", "trend":"bad", "suffix":"conv. allowed" },
    { "label":"Boley", "value":"885 yds • 4 TD", "trend":"good" }
  ]
  </script>

  <!-- Featured + Spotlight fallbacks -->
  <script type="application/json" id="fallback-spotlight_featured">
  {"name":"Cutter Boley","pos":"QB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5141378.png","espn":"https://www.espn.com/college-football/player/_/id/5141378/cutter-boley","last_game":{"opp":"Texas","cmp_att":"31/39","yds":"258","td":"0","int":"1"}}
  </script>
  <script type="application/json" id="fallback-spotlight_offense_last">
  [
    {"name":"Cutter Boley","pos":"QB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5141378.png","espn":"https://www.espn.com/college-football/player/_/id/5141378/cutter-boley","last_game":{"opp":"Texas","cmp_att":"31/39","yds":"258","td":"0","int":"1"}},
    {"name":"Seth McGowan","pos":"RB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4686468.png","espn":"https://www.espn.com/college-football/player/_/id/4686468/seth-mcgowan","last_game":{"opp":"Texas","rush":"14","yds":"45","td":"0","rec":"7","rec_yds":"68"}},
    {"name":"Kendrick Law","pos":"WR","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4685441.png","espn":"https://www.espn.com/college-football/player/_/id/4685441/kendrick-law","last_game":{"opp":"Texas","rec":"3","yds":"25","td":"0"}}
  ]
  </script>
  <script type="application/json" id="fallback-spotlight_offense_season">
  [
    {"name":"Seth McGowan","pos":"RB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4686468.png","espn":"https://www.espn.com/college-football/player/_/id/4686468/seth-mcgowan","season":{"car":"93","yds":"476","td":"7","avg":"5.1"}},
    {"name":"Cutter Boley","pos":"QB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5141378.png","espn":"https://www.espn.com/college-football/player/_/id/5141378/cutter-boley","season":{"cmp_pct":"64%","yds":"885","td":"4","int":"4"}},
    {"name":"Ja'Mori Maclin","pos":"WR","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4430270.png","espn":"https://www.espn.com/college-football/player/_/id/4430270/jamori-maclin","season":{"rec":"8","yds":"135","td":"0","avg":"16.9"}}
  ]
  </script>
  <script type="application/json" id="fallback-spotlight_defense_last">
  [
    {"name":"Alex Afari Jr.","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4819224.png","espn":"https://www.espn.com/college-football/player/_/id/4819224/alex-afari-jr","last_game":{"opp":"Texas","tkl":"7","tfl":"1","pbu":"1"}},
    {"name":"Daveren Rayner","pos":"LB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4430670.png","espn":"https://www.espn.com/college-football/player/_/id/4430670/daveren-rayner","last_game":{"opp":"Texas","tkl":"9","tfl":"1"}},
    {"name":"Jordan Lovett","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4683458.png","espn":"https://www.espn.com/college-football/player/_/id/4683458/jordan-lovett","last_game":{"opp":"Texas","tkl":"6"}}
  ]
  </script>
  <script type="application/json" id="fallback-spotlight_defense_season">
  [
    {"name":"Alex Afari Jr.","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4819224.png","espn":"https://www.espn.com/college-football/player/_/id/4819224/alex-afari-jr","season":{"tkl":"38","tfl":"4","pbu":"4"}},
    {"name":"Daveren Rayner","pos":"LB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/4430670.png","espn":"https://www.espn.com/college-football/player/_/id/4430670/daveren-rayner","season":{"tkl":"42","tfl":"3","sck":"1"}},
    {"name":"DJ Waller Jr.","pos":"DB","headshot":"https://a.espncdn.com/i/headshots/college-football/players/full/5092262.png","espn":"https://www.espn.com/college-football/player/_/id/5092262/dj-waller-jr","season":{"tkl":"21","int":"1","pbu":"3"}}
  ]
  </script>

  <!-- Optional: manual "Showtime" boosts (big moment credit). Add entries as needed. -->
  <script type="application/json" id="hc-showtime">
  [
    /* Example:
    { "eventId":"401752747",
      "players":[
        { "id":"4685441", "bonus": 8, "note":"OT catch at the pylon (ruled short) shifted momentum" }
      ]
    }
    */
  ]
  </script>
  <!-- ======== END INLINE DATA ======== -->

  <!-- Single inline script: ESPN live + grading + banner stats -->
  <script>
/* Hashmark Chronicles — Spotlight v1.7
   - Builds full "played roster" from ESPN boxscore (last game) and team leaders (season)
   - Scores by position group, normalizes, outputs letter+/- and % with trend
   - Leaves your design / markup intact; only enhances the mini-spotlight list */

(function start(run){document.readyState!=='loading'?run():document.addEventListener('DOMContentLoaded',run)})(function(){
(async function(){

  /* ---------- CONFIG ---------- */
  const TEAM_ID   = new URLSearchParams(location.search).get('team') || '96'; // Kentucky
  const POLL_MS   = 30000;                       // refresh window
  const SHOW_N    = 3;                           // top N per view
  const USE_ENV_LEADERS = true;                  // season leaders source
  const log=(...a)=>console.log('[HC]',...a), err=(...a)=>console.error('[HC]',...a);

  /* ---------- DOM ---------- */
  const wrap=document.getElementById('miniSpotlight');
  const list=document.getElementById('miniList');
  const featuredEl=document.getElementById('miniFeatured');

  /* ---------- helpers ---------- */
  const readJSONtag = id => { const t=document.getElementById(id); if(!t) return null; try{ return JSON.parse(t.textContent) }catch(e){return null} };
  const headshot = id => id ? `https://a.espncdn.com/i/headshots/college-football/players/full/${id}.png` : '';
  const safeNum = v => { if(v==null) return 0; const s=String(v); const m=s.match(/-?\d+(\.\d+)?/); return m?parseFloat(m[0]):0 };
  const parseCmpAtt = s => { const m=String(s||'').match(/(\d+)\s*\/\s*(\d+)/); return m?{cmp:+m[1],att:+m[2]}:{cmp:0,att:0}; };

  const letterFrom = pct => {
    // map 0..100 => letter with +/- granularity
    const p = Math.max(0, Math.min(100, pct));
    const bands = [
      {min:97, g:'A+'},{min:93,g:'A'},{min:90,g:'A-'},
      {min:87,g:'B+'},{min:83,g:'B'},{min:80,g:'B-'},
      {min:77,g:'C+'},{min:73,g:'C'},{min:70,g:'C-'},
      {min:67,g:'D+'},{min:63,g:'D'},{min:60,g:'D-'},
      {min:-1,g:'F'}
    ];
    return bands.find(b=>p>=b.min).g;
  };
  const gradeClass = g => g[0]==='A'?'grade-A':g[0]==='B'?'grade-B':g[0]==='C'?'grade-C':g[0]==='D'?'grade-D':'grade-F';

  function rowHTML(p){
    const initials=(p.name||'').split(/\s+/).map(s=>s[0]).slice(0,2).join('').toUpperCase()||'UK';
    const stat=p.statline||'';
    const grade = p.grade || {letter:'', pct:NaN, trend:0};
    const trendClass = grade.trend>2 ? 'up' : grade.trend<-2 ? 'down' : 'flat';
    const trendGlyph = grade.trend>2 ? '▲' : grade.trend<-2 ? '▼' : '•';
    return `
      <div class="row">
        <img src="${p.headshot||''}" alt="${p.name} headshot"
             onerror="this.replaceWith((()=>{const d=document.createElement('div');d.style.cssText='width:48px;height:48px;border-radius:8px;display:grid;place-items:center;background:#0033a0;color:#fff;font:800 14px/1 system-ui';d.textContent='${initials}';return d;})())">
        <div>
          <div class="who">${p.name} <span class="tiny">• ${p.pos||''}</span></div>
          <div class="stat">${stat} <a href="${p.espn||'#'}" target="_blank" rel="noopener" class="tiny">ESPN ↗</a></div>
        </div>
        <div class="grade-wrap">
          ${isFinite(grade.pct) ? `
            <div class="grade-badge ${gradeClass(grade.letter)}">${grade.letter}<small>${Math.round(grade.pct)}%</small></div>
            <div class="trend ${trendClass}" title="trend vs season">${trendGlyph}</div>
          ` : ``}
        </div>
      </div>`;
  }
  function renderList(arr){ list.innerHTML = (arr&&arr.length) ? arr.slice(0,SHOW_N).map(rowHTML).join('') : '<div class="tiny">No data available.</div>'; }

  function setKickoffUI(teamName, oppName, meta){
    const t=document.getElementById('nextTeamName');
    const o=document.getElementById('nextOpponent');
    const m=document.getElementById('nextMeta');
    if(t) t.textContent=teamName||'Kentucky';
    if(o) o.textContent=oppName||'[Opponent]';
    if(m) m.innerHTML=`Date • Time • TV: <b>${meta.when}</b> • <b>${meta.tv}</b>`;
  }
  const fmtKick = (dateStr, networks)=>{
    const d=new Date(dateStr);
    const when=isFinite(d)?d.toLocaleString(undefined,{weekday:'short',month:'short',day:'numeric',hour:'numeric',minute:'2-digit'}):'TBA';
    const tv=(networks&&networks[0])?(networks[0].shortName||networks[0].name||'TV TBA'):'TV TBA';
    return {when,tv};
  };

  async function j(url){ const r=await fetch(url,{mode:'cors',cache:'no-store'}); if(!r.ok) throw new Error(r.status+' '+url); return r.json(); }
  const getEnv     = async id => j(`https://site.api.espn.com/apis/site/v2/sports/football/college-football/teams/${id}`);
  const getSummary = async eid => j(`https://site.api.espn.com/apis/site/v2/sports/football/college-football/summary?event=${eid}`);

  async function chooseEvent(env){
    const next=env?.team?.nextEvent?.[0];
    const prev=env?.team?.previousEvent?.[0];
    if(next?.id){
      try{ const sum=await getSummary(next.id);
        const st=sum?.header?.competitions?.[0]?.status?.type?.state;
        if(st==='in'||st==='post') return {id:next.id,sum,state:st};
        if(prev?.id){ const sump=await getSummary(prev.id); return {id:prev.id,sum:sump,state:sump?.header?.competitions?.[0]?.status?.type?.state,usePrev:true,nextId:next.id}; }
        return {id:next.id,sum,state:st};
      }catch(e){ err('choose next failed',e); }
    }
    if(prev?.id){ const sump=await getSummary(prev.id); return {id:prev.id,sum:sump,state:sump?.header?.competitions?.[0]?.status?.type?.state,usePrev:true}; }
    return null;
  }

  /* ---------- PARSERS & SCORERS ---------- */
  function teamBlockFromBox(sum, teamId){
    const blocks=sum?.boxscore?.players||[];
    return blocks.find(b=>String(b.team?.id)===String(teamId))||blocks[0];
  }
  function collectOffensePlayers(teamBlock){
    if(!teamBlock) return {qb:[], rb:[], wr:[]};
    const cats={}; for(const c of (teamBlock.statistics||[])) cats[c.type]=c;
    const pass=cats.passing, rush=cats.rushing, recv=cats.receiving;
    const of = (cat)=>{ if(!cat) return []; const L=cat.labels||[]; return (cat.athletes||[]).map(a=>({a,L})); };
    return {
      qb: (of(pass)).map(({a,L})=>{
        const id=a.athlete?.id||a.id, name=a.athlete?.displayName||a.displayName;
        const pos=a.athlete?.position?.abbreviation||'QB';
        const map = Object.fromEntries((L||[]).map((k,i)=>[k, a.stats?.[i]]));
        const {cmp,att}=parseCmpAtt(map['CMP-ATT']); const yds=safeNum(map['YDS']); const td=safeNum(map['TD']); const int=safeNum(map['INT']);
        const ypa=att?yds/att:0, cpc=att?100*cmp/att:0;
        const statline=`CMP/ATT ${cmp}/${att} • YDS ${yds} • TD ${td}${int?` • INT ${int}`:''}`;
        return {id,name,pos,statline,yds,td,int,att,cmp,ypa,cpc};
      }),
      rb: (of(rush)).map(({a,L})=>{
        const id=a.athlete?.id||a.id, name=a.athlete?.displayName||a.displayName;
        const pos=a.athlete?.position?.abbreviation||'RB';
        const m=Object.fromEntries(L.map((k,i)=>[k,a.stats?.[i]]));
        const car=safeNum(m['CAR']), yds=safeNum(m['YDS']), td=safeNum(m['TD']), avg=safeNum(m['AVG']);
        const statline=`RUSH ${car} • YDS ${yds} • TD ${td}`;
        return {id,name,pos,statline,car,yds,td,avg,ypc:avg|| (car?yds/car:0)};
      }),
      wr: (of(recv)).map(({a,L})=>{
        const id=a.athlete?.id||a.id, name=a.athlete?.displayName||a.displayName;
        const pos=a.athlete?.position?.abbreviation||'WR';
        const m=Object.fromEntries(L.map((k,i)=>[k,a.stats?.[i]]));
        const rec=safeNum(m['REC']), yds=safeNum(m['YDS']), td=safeNum(m['TD']), avg=safeNum(m['AVG']);
        const statline=`REC ${rec} • YDS ${yds} • TD ${td}`;
        return {id,name,pos,statline,rec,yds,td,avg,ypr:avg|| (rec?yds/rec:0)};
      })
    };
  }
  function collectDefensePlayers(teamBlock){
    const def = (teamBlock?.statistics||[]).find(x=>/defens/i.test(x.type));
    if(!def) return [];
    const L=def.labels||[], rows=def.athletes||[];
    const idx=(k)=>L.indexOf(k);
    return rows.map(r=>{
      const id=r.athlete?.id||r.id, name=r.athlete?.displayName||r.displayName, pos=r.athlete?.position?.abbreviation||'DEF';
      const stat = (k)=>{const i=idx(k); return i>=0? safeNum(r.stats?.[i]) : 0};
      const TOT=stat('TOT')||stat('TOTAL'), SOLO=stat('SOLO'), TFL=stat('TFL'), SCK=stat('SCK')||stat('SACKS'), INT=stat('INT'), PBU=stat('PD')||stat('PBU');
      const parts=[]; if(TOT) parts.push(`TKL ${TOT}`); if(TFL) parts.push(`TFL ${TFL}`); if(SCK) parts.push(`SACKS ${SCK}`); if(INT) parts.push(`INT ${INT}`);
      return {id,name,pos,statline:parts.slice(0,3).join(' • '), TOT,SOLO,TFL,SCK,INT,PBU};
    });
  }

  // raw scoring per role (hand-tuned v1.1)
  function scoreQB(q){ return (q.ypa*9) + (q.cpc*0.28) + (q.td*6) - (q.int*10) + (q.yds*0.04); }
  function scoreRB(r){ return (r.ypc*12) + (r.td*8) + (r.yds*0.09) + (r.car*0.5); }
  function scoreWR(w){ return (w.ypr*7) + (w.td*10) + (w.yds*0.08) + (w.rec*1.2); }
  function scoreDEF(d){ return (d.TOT*3.6) + (d.TFL*7) + (d.SCK*10) + (d.INT*14) + (d.PBU*3); }

  // normalize within a group => 60..98 band (prevents the “all C-” effect)
  function normalizeGroup(list, accessor){
    const raw = list.map(x=>({x, s:accessor(x)}));
    const min = Math.min(...raw.map(o=>o.s), 0);
    const max = Math.max(...raw.map(o=>o.s), 1);
    const span = Math.max(1, max-min);
    return raw.map(o=>{
      const p = (o.s-min)/span;           // 0..1
      const pct = 60 + p*38;              // 60..98
      return { ...o.x, pct };
    });
  }

  function gradeize(pct){
    const letter = letterFrom(pct);
    return {letter, pct};
  }

  function attachMeta(arr, id2seasonPct){
    return arr.map(v=>({
      ...v,
      headshot: headshot(v.id),
      espn: `https://www.espn.com/college-football/player/_/id/${v.id}`,
      grade: (()=>{
        const base = gradeize(v.pct);
        const season = id2seasonPct?.get(v.id);
        const trend = isFinite(season) ? (base.pct - season) : 0;
        return {...base, trend};
      })()
    }));
  }

  /* season leaders → coarse season % so we can trend vs last */
  async function seasonLeaders(env){
    const out = {offense:[], defense:[], id2pct:new Map()};
    if(!USE_ENV_LEADERS) return out;

    // try: enable=leaders view first
    let teamL=null;
    try{
      teamL = await j(`https://site.api.espn.com/apis/site/v2/sports/football/college-football/teams/${TEAM_ID}?enable=leaders`);
    }catch(e){ log('leaders enable failed; falling back', e); }

    const groups = teamL?.team?.leaders?.leaders || teamL?.leaders || [];
    const take = (need)=> (groups.find(g=>{
      const n=(g?.name || g?.displayName || '').toLowerCase();
      return need.some(k=>n.includes(k));
    })?.leaders || []).map(L=>({
      id: L?.athlete?.id, name:L?.athlete?.displayName, pos:L?.athlete?.position?.abbreviation,
      val: safeNum(L?.value), text:L?.displayValue||''
    }));

    const pass = take(['passing yards','pass']);
    const rush = take(['rushing yards','rush']);
    const recv = take(['receiving yards','receiv']);
    const tkl  = take(['tackles','total tackles']);
    const sack = take(['sacks']);
    const ints = take(['interceptions']);

    const off = [];
    if(pass[0]) off.push({id:pass[0].id, name:pass[0].name, pos:'QB', statline:`YDS ${pass[0].val}`, pct:75});
    if(rush[0]) off.push({id:rush[0].id, name:rush[0].name, pos:'RB', statline:`YDS ${rush[0].val}`, pct:75});
    if(recv[0]) off.push({id:recv[0].id, name:recv[0].name, pos:'WR', statline:`YDS ${recv[0].val}`, pct:75});

    const def = [];
    if(tkl[0]) def.push({id:tkl[0].id, name:tkl[0].name, pos:'DEF', statline:`TKL ${tkl[0].val}`, pct:75});
    if(sack[0])def.push({id:sack[0].id,name:sack[0].name,pos:'DEF', statline:`SACKS ${sack[0].val}`, pct:75});
    if(ints[0])def.push({id:ints[0].id,name:ints[0].name,pos:'DB',  statline:`INT ${ints[0].val}`, pct:75});

    // Give them a gentler normalization so they don’t all tie; also populate id→pct map
    const nn = x => x.map((v,i)=>{const pct=72 + (x.length>1? (i===0?6:(i===1?3:0)) : 4); return {...v,pct}});
    const offense = nn(off), defense = nn(def);
    for(const a of [...offense, ...defense]) out.id2pct.set(a.id, a.pct);
    return {offense, defense, id2pct: out.id2pct};
  }

  /* ---------- UI STATE ---------- */
  let side='offense', span='last';
  wrap?.querySelectorAll('.chip').forEach(btn=>{
    btn.addEventListener('click',()=>{
      if(btn.dataset.side) side=btn.dataset.side;
      if(btn.dataset.span) span=btn.dataset.span;
      wrap.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
      wrap.querySelectorAll(`.chip[data-side="${side}"]`).forEach(c=>c.classList.add('active'));
      wrap.querySelectorAll(`.chip[data-span="${span}"]`).forEach(c=>c.classList.add('active'));
      paint();
    });
  });
  wrap?.querySelector(`.chip[data-side="${side}"]`)?.classList.add('active');
  wrap?.querySelector(`.chip[data-span="${span}"]`)?.classList.add('active');

  /* ---------- Ticker stays inline (unchanged) ---------- */
  (function(){
    const items=readJSONtag('fallback-ticker');
    const track=document.getElementById('tickerTrack');
    if(Array.isArray(items)&&track){
      track.innerHTML=items.map(it=>{
        const trend=it.trend||'warn';
        const suffix=it.suffix?(' '+it.suffix):'';
        return `<li><span class="trend-dot ${trend}"></span><span class="label"><strong>${it.label}</strong> <span class="trend-value ${trend}">${it.value}</span>${suffix}</span></li>`;
      }).join('');
    }
  })();

  // draw inline Featured quickly, then live replaces it
  (function quickFeatured(){
    const f=readJSONtag('fallback-spotlight_featured');
    if(f && featuredEl){
      const stat = Object.entries(f.last_game||f.season||{}).slice(0,3).map(([k,v])=>`${k.toUpperCase().replace('_','-')} ${v}`).join(' • ');
      featuredEl.innerHTML = rowHTML({name:f.name,pos:f.pos,headshot:f.headshot,espn:f.espn,statline:stat});
      featuredEl.style.display='flex';
    }
  })();

  /* ---------- DATA CACHE ---------- */
  const LIVE = { last:{offense:[], defense:[], map:new Map()}, season:{offense:[], defense:[], id2pct:new Map()} };

  function paint(){
    const use = (span==='last') ? LIVE.last : LIVE.season;
    const arr = (side==='offense') ? use.offense : use.defense;
    if(arr && arr.length){ renderList(arr); }
    else{
      // inline fallback if live not ready
      const inline = readJSONtag(`fallback-spotlight_${side}_${span}`) || [];
      const adapt = inline.map(p=>({
        name:p.name, pos:p.pos, headshot:p.headshot, espn:p.espn,
        statline:Object.entries((p.last_game||p.season||{})).slice(0,3).map(([k,v])=>`${k.toUpperCase().replace('_','-')} ${v}`).join(' • ')
      }));
      renderList(adapt);
    }
  }

  /* ---------- LIVE BOOT ---------- */
  async function boot(){
    const env=await getEnv(TEAM_ID).catch(e=>{err('env',e); return null});
    if(env){
      const teamName=env?.team?.displayName||'Kentucky';
      const nxt=env?.team?.nextEvent?.[0] || env?.team?.previousEvent?.[0];
      if(nxt){
        const comp=nxt.competitions?.[0];
        const meta=fmtKick(nxt.date || comp?.date, comp?.broadcasts || comp?.broadcast || []);
        const comps = comp?.competitors||[];
        const foe = comps.find(c=>String(c.team?.id)!==String(TEAM_ID))||comps[0];
        setKickoffUI(teamName, foe?.team?.displayName||'TBA', meta);
      }
    }

    const pick = await chooseEvent(env);
    if(!pick){ log('no event; showing inline'); paint(); return; }

    // LAST (from full boxscore)
    const tb = teamBlockFromBox(pick.sum, TEAM_ID);
    const O  = collectOffensePlayers(tb);
    const D  = collectDefensePlayers(tb);

    // compute shares for offense (light impact boost)
    const sumRush = O.rb.reduce((a,b)=>a+(b.yds||0),0);
    const sumRecv = O.wr.reduce((a,b)=>a+(b.yds||0),0);

    const qbN = normalizeGroup(O.qb,  scoreQB).map(v=>({...v, pct:v.pct +  (v.att>25?2:0)}));
    const rbN = normalizeGroup(O.rb,  scoreRB).map(v=>({...v, pct:v.pct + (sumRush? Math.min(3, (v.yds/sumRush)*6):0)}));
    const wrN = normalizeGroup(O.wr,  scoreWR).map(v=>({...v, pct:v.pct + (sumRecv? Math.min(3, (v.yds/sumRecv)*6):0)}));
    const defN= normalizeGroup(D,     scoreDEF);

    // combine to offense top list (mix positions fairly)
    const offensePool = [...qbN, ...rbN, ...wrN].sort((a,b)=>b.pct-a.pct).map(v=>({
      id:v.id, name:v.name, pos:v.pos, statline:v.statline, pct:v.pct
    }));
    const defensePool = defN.sort((a,b)=>b.pct-a.pct).map(v=>({
      id:v.id, name:v.name, pos:v.pos, statline:v.statline, pct:v.pct
    }));

    // SEASON leaders (coarse) for trend arrows
    const seas = await seasonLeaders(env).catch(()=>({offense:[],defense:[],id2pct:new Map()}));

    LIVE.season.offense = attachMeta(seas.offense, seas.id2pct).sort((a,b)=>b.grade.pct-a.grade.pct);
    LIVE.season.defense = attachMeta(seas.defense, seas.id2pct).sort((a,b)=>b.grade.pct-a.grade.pct);
    LIVE.season.id2pct  = seas.id2pct;

    LIVE.last.offense = attachMeta(offensePool, LIVE.season.id2pct);
    LIVE.last.defense = attachMeta(defensePool, LIVE.season.id2pct);

    // Featured = top from last offense if available
    const top = LIVE.last.offense[0] || LIVE.last.defense[0];
    if(top && featuredEl){ featuredEl.innerHTML=rowHTML(top); featuredEl.style.display='flex'; }

    paint();
  }

  await boot();
  setInterval(boot, POLL_MS);

  // footer year
  const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear();

})();
});
</script>

  </script>
</body>
</html>
